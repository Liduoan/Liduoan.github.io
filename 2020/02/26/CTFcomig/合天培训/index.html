<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="liduoan.efls">
    
    <title>
        
            合天培训（xss xxe uns FilInc ） |
        
        liduoan修炼笔记
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="https://i.postimg.cc/MpmSbVgT/4-U-3-AU-6-0-R8-L6-K5658-H.jpg">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/font/css/fontawesome.min.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/font/css/regular.min.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/font/css/solid.min.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/font/css/brands.min.css">
    <script id="hexo-configurations">
    let KEEP = window.KEEP || {}
    KEEP.hexo_config = {"hostname":"example.com","root":"/","language":"zh-CN","path":"search.json"}
    KEEP.theme_config = {"toc":{"enable":true,"number":true,"expand_all":true,"init_open":true},"style":{"primary_color":"#0066cc","logo":"https://i.postimg.cc/MpmSbVgT/4-U-3-AU-6-0-R8-L6-K5658-H.jpg","favicon":"https://i.postimg.cc/MpmSbVgT/4-U-3-AU-6-0-R8-L6-K5658-H.jpg","avatar":"https://i.postimg.cc/MpmSbVgT/4-U-3-AU-6-0-R8-L6-K5658-H.jpg","font_size":"17px","font_family":"STSong","hover":{"shadow":true,"scale":false},"first_screen":{"enable":true,"header_transparent":true,"background_img":"/images/bg.svg","description":"世之奇伟、瑰怪，非常之观，常在于险远 || 而人之所罕至焉，故非有志者不能至也","font_color":null,"hitokoto":false},"scroll":{"progress_bar":true,"percent":false}},"local_search":{"enable":true,"preload":true},"code_copy":{},"code_block":{"tools":{"enable":true,"style":"default"},"highlight_theme":"default"},"side_tools":{},"pjax":{"enable":true},"lazyload":{"enable":true},"comment":{"enable":false,"use":"valine","valine":{"appid":null,"appkey":null,"server_urls":null,"placeholder":null},"gitalk":{"github_id":null,"github_admins":null,"repository":null,"client_id":null,"client_secret":null,"proxy":null},"twikoo":{"env_id":null,"region":null,"version":"1.6.8"},"waline":{"server_url":null,"reaction":false,"version":2}},"post":{"author_label":{"enable":true,"auto":false,"custom_label_list":["Engineer"]},"word_count":{"enable":true,"wordcount":true,"min2read":true},"img_align":"left","copyright_info":true},"version":"3.6.1"}
    KEEP.language_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 个月前","year":"%s 年前"}
    KEEP.language_code_block = {"copy":"复制代码","copied":"已复制","fold":"折叠代码块","folded":"已折叠"}
    KEEP.language_copy_copyright = {"copy":"复制版权信息","copied":"已复制","title":"原文标题","author":"原文作者","link":"原文链接"}
  </script>
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <i class="pjax-progress-icon fas fa-circle-notch fa-spin"></i>
    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            
<header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
                <a class="logo-image" href="/">
                    <img src="https://i.postimg.cc/MpmSbVgT/4-U-3-AU-6-0-R8-L6-K5658-H.jpg">
                </a>
            
            <a class="logo-title" href="/">
               liduoan修炼笔记
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                首页
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                归档
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/tags"
                            >
                                标签
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/categories"
                            >
                                分类
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">首页</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">归档</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/tags">标签</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/categories">分类</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="post-page-container">
        <div class="article-content-container">

            <div class="article-title">
                <span class="title-hover-animation">合天培训（xss xxe uns FilInc ）</span>
            </div>

            
                <div class="article-header">
                    <div class="avatar">
                        <img src="https://i.postimg.cc/MpmSbVgT/4-U-3-AU-6-0-R8-L6-K5658-H.jpg">
                    </div>
                    <div class="info">
                        <div class="author">
                            <span class="name">liduoan.efls</span>
                            
                                <span class="author-label">Engineer</span>
                            
                        </div>
                        <div class="meta-info">
                            
<div class="article-meta-info">
    <span class="article-date article-meta-item">
        
            <i class="fa-regular fa-calendar-plus"></i>&nbsp;
        
        <span class="pc">2020-02-26 01:16:52</span>
        <span class="mobile">2020-02-26 01:16</span>
    </span>
    
        <span class="article-update-date article-meta-item">
        <i class="fas fa-file-pen"></i>&nbsp;
        <span class="pc">2020-04-13 00:58:28</span>
    </span>
    
    
        <span class="article-categories article-meta-item">
            <i class="fas fa-folder"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/categories/%E5%AE%89%E5%85%A8/">安全</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fas fa-file-word"></i>&nbsp;<span>6.1k 字</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fas fa-clock"></i>&nbsp;<span>22 分钟</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                        </div>
                    </div>
                </div>
            

            <div class="article-content keep-markdown-body">
                

                <p><img  
                     lazyload
                     alt="image"
                     data-src="https://img-blog.csdnimg.cn/20200228172506395.PNG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RVT2FuMDIxNg==,size_16,color_FFFFFF,t_70"
                      alt="img"
                ></p>
<h2 id="HTTP-x2F-HTTPS协议介绍"><a href="#HTTP-x2F-HTTPS协议介绍" class="headerlink" title="HTTP&#x2F;HTTPS协议介绍"></a>HTTP&#x2F;HTTPS协议介绍</h2><p>HTTP的工作流程</p>
<span id="more"></span>

<p>客户端通过TCP三次握手与服务器建立连接</p>
<p>TCP连接之后 向服务器发送HTTP请求</p>
<p>服务器接收到HTTP请求后 向客户端发送http响应</p>
<p>客户端通过TCP四次断开 与服务器断开TCP连接</p>
<p>请求头字段详情：<a class="link"   target="_blank" rel="noopener" href="https://itbilu.com/other/relate/EJ3fKUwUx.html#http-request-headers" >https://itbilu.com/other/relate/EJ3fKUwUx.html#http-request-headers<i class="fas fa-external-link-alt"></i></a></p>
<p>请求头字段</p>
<ul>
<li><p>常见的请求方法：GET POST</p>
<p><code>Referer</code>这个可以表示你从哪个URL过来的</p>
<p><code>X-Forwarded-For</code>这个表示你从那个ip过来的</p>
<p><code>Client-IP</code>:和<code>X-Forwarded-For</code>类似</p>
<p><code>User-Agent</code>表示你从哪个操作系统或者哪个客户端（浏览器）过来的</p>
</li>
</ul>
<h4 id="浏览器安全"><a href="#浏览器安全" class="headerlink" title="浏览器安全"></a>浏览器安全</h4><ul>
<li><p>同源策略</p>
<p>同源指得是域名，协议端口相同。不同源的客户端脚本在没有明确授权的情况下，不能读写对方的资源。【例如你打开两个不同的网址 这两个网址之间不可以相互读写。</p>
<p>它是用来隔离两个网站的脚本混乱【例如 你打开一个京东的网址和百度的网址，可能京东的广告在百度的网址上出现了。</p>
</li>
<li><p>内容安全策略</p>
<p><code>Content-Security-Policy</code>:限定了可执行的内容</p>
<p>内容安全策略指的是 以白名单的形式配置可信任的内容来源</p>
<p>在网页中，能够使白名单的内容正常执行（包含：JS,CSS,Image）</p>
<p>而在非白名单的内容不可正常执行，从而减少了跨站脚本攻击（XSS）</p>
</li>
</ul>
<hr>
<h2 id="XSS"><a href="#XSS" class="headerlink" title="XSS"></a>XSS</h2><h3 id="前端基础"><a href="#前端基础" class="headerlink" title="前端基础"></a>前端基础</h3><p>看其他的博客去。</p>
<p> 跨站脚本攻击：<a class="link"   target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000017057646" >https://segmentfault.com/a/1190000017057646<i class="fas fa-external-link-alt"></i></a></p>
<p>。。。我看视频看的好迷。。。。</p>
<p>xss进阶实验</p>
<hr>
<h2 id="FileInclude"><a href="#FileInclude" class="headerlink" title="FileInclude"></a>FileInclude</h2><p><em>文件包含：为了更好的使用代码的重用性</em><br><em>引入了文件包含函数</em><br><em>比如<code>include(flag.php)</code></em><br><em>它可以把flag.php的文件代码放到该文件里面</em><br><em>如此使得代码的重用性增加了</em><br><em>不过</em><br><em><code>include($_GET)</code></em><br><em>里面是变量 可能被恶意改造</em></p>
<p>漏洞原因：<br>未对变量进行校验或者校验被绕过</p>
<ul>
<li><p>主要依靠四个PHP函数导致<br>include() PHP代码解析<br>include_once()<br>require()<br>require_once()</p>
<p>另外还有一些<br>file_get_contents()<br>读取文件内容</p>
</li>
</ul>
<p>简单的一个包含例子：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$file</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;file&#x27;</span>];</span><br><span class="line"><span class="keyword">include</span>(<span class="variable">$file</span>);</span><br><span class="line">....</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>

<h5 id="文件包含漏洞分类"><a href="#文件包含漏洞分类" class="headerlink" title="文件包含漏洞分类"></a>文件包含漏洞分类</h5><p>本地文件包含<br>远程文件包含</p>
<h5 id="伪协议"><a href="#伪协议" class="headerlink" title="伪协议"></a>伪协议</h5><p><img  
                     lazyload
                     alt="image"
                     data-src="https://img-blog.csdnimg.cn/20190917100424906.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RVT2FuMDIxNg==,size_16,color_FFFFFF,t_70"
                     
                ></p>
<ul>
<li>伪协议CTF使用：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?file=php://filter/read=convert.base64-encode/resource=php_filter.php</span><br><span class="line">?file=php://filter/resource=http://www.example.com</span><br></pre></td></tr></table></figure>

<ul>
<li><p>file:&#x2F;&#x2F; 用于访问本地文件系统，在CTF中通常用来读取本地文件的</p>
<p>file:&#x2F;&#x2F; [文件的绝对路径和文件名]</p>
<p><a class="link"   target="_blank" rel="noopener" href="http://127.0.0.1/cmd.php?file=file://D:/soft/phpStudy/WWW/phpcode.txt" >http://127.0.0.1/cmd.php?file=file://D:/soft/phpStudy/WWW/phpcode.txt<i class="fas fa-external-link-alt"></i></a></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://image.3001.net/images/20170925/15063200934739.png"
                      alt="img"
                ></p>
</li>
<li><p>php:&#x2F;&#x2F;协议</p>
<p>常用的协议是</p>
<p><code>php:??filter</code>用于读取源码    <code>?file=php://filter/read=convert.base64-encode/resource=./cmd.php</code></p>
<p><code>php://input</code>用于执行php代码    她可以将POST请求的数据作为PHP代码执行 常见的在getconvert</p>
</li>
</ul>
<h5 id="文件包含绕过"><a href="#文件包含绕过" class="headerlink" title="文件包含绕过"></a>文件包含绕过</h5><p>就是变量的输入被限制了</p>
<p>绕过的方式有：<br>1、00截断</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="comment">//127.0.0.1/tst.php?file=file:///c:/user/Thinking/desktop/flag.txt%00</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">	<span class="keyword">include</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;file&#x27;</span>]);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>



<p>2、点加斜杆绕过<br>（过滤了.php文件）<br>加点和斜杆来补充尾巴<br>那种判断文件名后四位是不是<code>.php</code>的函数<br>可以利用<br><code>· / 或者 /.</code></p>
<p>3、去掉后缀名绕过</p>
<p>4、双写绕过<br>双写绕过的意义在于<br>函数判断是否有这样的字符串<code>../</code>等等<br>有的话 把它变成空格。</p>
<p>比如过滤了…&#x2F;<br>那么可以这么写<code>..././</code>，这样会把中间的<code>../</code>过滤掉<br>这样就可以过滤掉这个函数</p>
<p>PS：<br>在SQL注入中<br>也有双写注入 ， 比如过滤了union ，我们可以写成 uniunionon;</p>
<p>5、文件包含写shell</p>
<hr>
<h2 id="XXE"><a href="#XXE" class="headerlink" title="XXE"></a>XXE</h2><p>大师傅的博客：<a class="link"   target="_blank" rel="noopener" href="https://mature-sec.com/post/xxe%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" >https://mature-sec.com/post/xxe%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/<i class="fas fa-external-link-alt"></i></a></p>
<h3 id="XML介绍："><a href="#XML介绍：" class="headerlink" title="XML介绍："></a>XML介绍：</h3><p>XML是一种用于标记电子文件使其具有结构性的可扩展标记语言</p>
<p><code>XtensibleMarkup Language</code>,可扩展标记语言，使用简单的标记来描述数据</p>
<p>xml是一种非常灵活的语言，类似于HTML语言，但是并没有固定的标签，所有的标签都可以自定义，其设计的宗旨是传输数据，而不是像HTML一样显示数据。</p>
<p>数据传输的载体</p>
<p>XML不会做任何事情，他是呗设计用来结构化、存储以及传输信息，也就是xml文件所携带的信息，需要被其他的语言或者程序来解析，才能发挥作用。</p>
<h3 id="XML的用处"><a href="#XML的用处" class="headerlink" title="XML的用处"></a>XML的用处</h3><p>通常，xml被用于信息的记录和传递(比如，数据库的导出导入会很麻烦，但是xml会很方便)，也会被用于充当配置文件。也会被应用于Web 开发的许多方面，常用于简化数据的存储和共享。如：</p>
<p>XML 把数据从 HTML 分离，更方便在HTML文档中显示动态数据。</p>
<p> XML 简化数据共享，XML数据以纯文本格式进行存储，因此提供了一种独立于软件和硬件的数据存储方法。这让创建不同应用程序可以共享的数据变得更加容易。</p>
<p>XML 简化数据传输，由于可以通过各种不兼容的应用程序来读取数据，以 XML 交换数据降低了不兼容系统之间交换书据的复杂性。</p>
<p>XML 简化平台变更，使用XML存储一些不兼容的数据，可以在系统或软件升级，转换大量的数据时，避免数据的丢失。</p>
<p>XML 使您的数据更有用，XML可以使不同的应用程序都能够访问您的数据，使得数据的用途更广。</p>
<p>XML 用于创建新的互联网语言，如XHTML、WSDL、WAP 和 WML、RSS 、RDF 和 OWL等</p>
<h3 id="XML语法"><a href="#XML语法" class="headerlink" title="XML语法"></a>XML语法</h3><ul>
<li>XML文档中有且只有一个根元素</li>
<li>XML元素都必须有一个关闭标签</li>
<li>XML标签对大小写敏感</li>
<li>XML元素必须被正确的嵌套</li>
<li>XML属性值必须加引号</li>
</ul>
<p>它没有固定的标签</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="DTD-文档类型定义"><a href="#DTD-文档类型定义" class="headerlink" title="DTD 文档类型定义"></a>DTD 文档类型定义</h3><p>用来为XML文档定义语义约束</p>
<p>1、我们可以理解为一个模板，这个模板定义了用户自己</p>
<p>创建的根元素以及对应的子元素和根元素的合法元素和属性</p>
<p>2、而文档元素则必须以我们的DTD为模板，来对XML的元素的</p>
<p>内容进行相应的规范化。</p>
<p>DTD分为内部和外部两种。DTD定义在xml文件中视为内部DTD；</p>
<p>DTD定义在外部的dtd文件中，视为外部DTD。</p>
<h4 id="DTD声明"><a href="#DTD声明" class="headerlink" title="DTD声明"></a>DTD声明</h4><p>内部声明：DTD被包含在XML源文件中，应当使用下面的语法包装在一个DOCTYPE声明中：</p>
<p>语法：<!DOCTYPE  根元素  [元素声明] ></p>
<p>例子：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--这里是注释--&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">books</span> [</span></span><br><span class="line"><span class="meta">    <span class="meta">&lt;!ELEMENT <span class="keyword">books</span> (<span class="keyword">book</span>+)&gt;</span></span></span><br><span class="line"><span class="meta">    <span class="meta">&lt;!ELEMENT <span class="keyword">book</span> (<span class="keyword">name</span>,<span class="keyword">author</span>,<span class="keyword">price</span>)&gt;</span></span></span><br><span class="line"><span class="meta">    <span class="meta">&lt;!ATTLIST <span class="keyword">book</span> <span class="keyword">id</span> <span class="keyword">CDATA</span> <span class="keyword">#REQUIRED</span>&gt;</span></span></span><br><span class="line"><span class="meta">    <span class="meta">&lt;!ELEMENT <span class="keyword">name</span> (<span class="keyword">#PCDATA</span>)&gt;</span></span></span><br><span class="line"><span class="meta">    <span class="meta">&lt;!ELEMENT <span class="keyword">author</span> (<span class="keyword">#PCDATA</span>)&gt;</span></span></span><br><span class="line"><span class="meta">    <span class="meta">&lt;!ELEMENT <span class="keyword">price</span> (<span class="keyword">#PCDATA</span>)&gt;</span></span></span><br><span class="line"><span class="meta">    </span></span><br><span class="line"><span class="meta">]&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">books</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">book</span> <span class="attr">id</span>=<span class="string">&quot;b01&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>Python黑客编程从入门到入狱<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">author</span>&gt;</span>张三<span class="tag">&lt;/<span class="name">author</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">price</span>&gt;</span>$20.00<span class="tag">&lt;/<span class="name">price</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">book</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">books</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>如上，就是一个内部DTD的引用示例，在DTD定义中，要求根元素books的子元素book出现一次及以上，子元素book又有三个子元素，分别为name，author和price，然后声明了元素book的id属性，其类型是CDATA，并且是必须的（#REQUIRED），最后定义了book的三个子元素的数据类型为#PCDATA，这表示这三个元素标签中的内容必须是文本，并能再出现子标签。</p>
<p>外部声明：假如DTD位于XML源文件的外部，应当使用下面的语法封装在一个DOCTYPE定义中</p>
<p>语法：<!DOCTYPE  根元素  SYSTEM "文件名"></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://img-blog.csdnimg.cn/20200302183948377.PNG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RVT2FuMDIxNg==,size_16,color_FFFFFF,t_70"
                      alt="外部声明"
                ></p>
<h4 id="PCDATA"><a href="#PCDATA" class="headerlink" title="PCDATA"></a>PCDATA</h4><p>指的是被解析的字符数据</p>
<p>XML解析器通常会解析XML文档中所有的文本</p>
<h4 id="CDATA"><a href="#CDATA" class="headerlink" title="CDATA"></a>CDATA</h4><p>CDATA 由“&lt;![CDATA [“开始，   由”]]&gt;” 结束</p>
<p>指的是不应由XML解析器进行解析的文本数据</p>
<p>CDATA部分中的所有内容都会被解析器忽略</p>
<h3 id="DTD实体"><a href="#DTD实体" class="headerlink" title="DTD实体"></a><em>DTD实体</em></h3><p>实体是用于定义引用普通文本或特殊字符的快捷方式的变量</p>
<p>实体就像是变量，可以用于存储数据，以便后续的使用。</p>
<p>但它的功能又不仅仅是存储。</p>
<p>比如外部实体，除了可以存储数据，还可以从远程文件或远程网络中读取内容或调用数据。至于什么是外部实体，别着急，接着往后看。</p>
<p>从实体被定义的位置来看，实体可以分为内部实体和外部实体。</p>
<p>就像内部DTD和外部DTD一样，内部实体，就是在XML文档内部的DTD进行定义的实体，外部实体就是定义在外部DTD文件中然后被引用到当前XML中的实体。</p>
<h4 id="内部普通实体："><a href="#内部普通实体：" class="headerlink" title="内部普通实体："></a>内部普通实体：</h4><p>​		声明 ： <!ENTITY 实体名称  "实体名称" ></p>
<p>​		引用： 一个实体的引用，由三部分构成： &amp;符号，实体名 ， 分号。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">books</span> [</span></span><br><span class="line"><span class="meta">	<span class="meta">&lt;!ENTITY <span class="keyword">test</span> <span class="string">&quot;Hello World&quot;</span>&gt;</span></span></span><br><span class="line"><span class="meta">]&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">books</span>&gt;</span><span class="symbol">&amp;test;</span><span class="tag">&lt;/<span class="name">books</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="外部普通实体"><a href="#外部普通实体" class="headerlink" title="外部普通实体"></a>外部普通实体</h4><p>声明： <!ENTITY 实体名称 SYSTEM "URL/URL"></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://img-blog.csdnimg.cn/20200302183959395.PNG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RVT2FuMDIxNg==,size_16,color_FFFFFF,t_70"
                      alt="外部普通实体"
                ></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">books</span> [</span></span><br><span class="line"><span class="meta">	<span class="meta">&lt;!ENTITY <span class="keyword">xxe</span> <span class="keyword">SYSTEM</span> <span class="string">&quot;http://localhost/xmltest.txt&quot;</span>&gt;</span></span></span><br><span class="line"><span class="meta">]&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">books</span>&gt;</span><span class="symbol">&amp;xxe;</span><span class="tag">&lt;/<span class="name">books</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="参数实体"><a href="#参数实体" class="headerlink" title="参数实体"></a>参数实体</h4><p><img  
                     lazyload
                     alt="image"
                     data-src="https://img-blog.csdnimg.cn/20200302184013857.PNG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RVT2FuMDIxNg==,size_16,color_FFFFFF,t_70"
                      alt="参数实体"
                ></p>
<h3 id="XML注入"><a href="#XML注入" class="headerlink" title="XML注入"></a>XML注入</h3><p>XML与HTML一样，也存在注入漏洞。比如：一个 web 应用，在进行用户注册时，选择以 xml 来存储数据到 xmldb 数据库中，当用户填写用户名，密码和邮箱时，后台存储的文件格式及内容如下：</p>
<p>   <img  
                     lazyload
                     alt="image"
                     data-src="http://www.hetianlab.com/headImg.action?guideImg=/7f2cef17-3494-4a3a-828c-64159c035811.png"
                      alt="img"
                ></p>
<p>那么攻击者就可以在注册的时候构造恶意的数据，假设他在用户名与密码的输入框中输入正常的文本，在最后的邮箱输入框中输入如下内容：</p>
<p>   <img  
                     lazyload
                     alt="image"
                     data-src="http://www.hetianlab.com/headImg.action?guideImg=/08894e79-3fec-4d93-9e18-9a0c290dd8e3.png"
                      alt="img"
                ></p>
<p>那么就会多注册一个名为admin的用户。</p>
<p>综合上面的小例子，我们可以知道,能够进行XML注入攻击的前提是，用户能够控制数据的输入，程序没有对输入的内容进行过滤且拼接了数据。那么相应的，破坏掉其中一个前提就可以进行防御了，既然我们无法限制用户的输入，那么就可以对数据进行过滤，将XML语言本身的“保留字符”进行过滤或者转意即可。</p>
<hr>
<h3 id="XXE-即SML外部实体注入攻击"><a href="#XXE-即SML外部实体注入攻击" class="headerlink" title="XXE 即SML外部实体注入攻击"></a>XXE 即SML外部实体注入攻击</h3><p>是一种web常见的安全漏洞，发生在应用程序解析XML输入时，没有</p>
<p>禁止外部实体的加载，导致了攻击者可以通过XML的外部实体获取服务器中本应被保护的数据</p>
<h4 id="产生原因："><a href="#产生原因：" class="headerlink" title="产生原因："></a>产生原因：</h4><p>在文档类型定义部分，可以引用外部的DTD文件，所以这里容易出现安全问题。</p>
<p>XML解析器解析外部实体支持多种协议。如：使用f<code>ile</code>协议可以读取本地文件内容</p>
<p>使用<code>http</code>协议可以获取web资源</p>
<p>因此 攻击者可以构建恶意的外部实体，当解析器解析了包含恶意的外部实体的XML文件时</p>
<p>就出现了XXE攻击。	</p>
<h4 id="XXE的利用场景"><a href="#XXE的利用场景" class="headerlink" title="XXE的利用场景"></a>XXE的利用场景</h4><p>一般分为两大场景</p>
<p>有回显和无回显</p>
<p>有回显的情况下 我们可以直接在页面种中看到payload的执行结果或现象（带内XML外部实体）</p>
<p>即攻击者可以发送带有XXE有效负载的请求并从包含某些数据的web应用程序获取响应</p>
<p>无回显的情况 可以使用外带数据通道提取数据即带外XML外部实体</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://img-blog.csdnimg.cn/20200302185015556.PNG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RVT2FuMDIxNg==,size_16,color_FFFFFF,t_70"
                      alt="-------------"
                ></p>
<hr>
<h3 id="有回显的本地文件读取"><a href="#有回显的本地文件读取" class="headerlink" title="有回显的本地文件读取"></a><strong>有回显的本地文件读取</strong></h3><p>   漏洞示例代码：</p>
<p>   <img  
                     lazyload
                     alt="image"
                     data-src="http://www.hetianlab.com/headImg.action?guideImg=/1eee747b-b70b-46e5-98d7-5980ae71014f.png"
                      alt="img"
                ></p>
<p>   测试payload：</p>
<p>   <img  
                     lazyload
                     alt="image"
                     data-src="http://www.hetianlab.com/headImg.action?guideImg=/5ef5ec0a-2adb-4a9f-8af6-b3131204bafe.png"
                      alt="img"
                ></p>
<p>   在浏览器中设置代理，打开burpsuite访问存在漏洞的页面：“xxetest.php”，并抓包，然后发送到Repeater中，构造请求包：</p>
<p>   <img  
                     lazyload
                     alt="image"
                     data-src="http://www.hetianlab.com/headImg.action?guideImg=/62d3bd12-eefa-4b0c-9157-2e3e21f9c8a9.png"
                      alt="img"
                ></p>
<p>​	这样我们就读取到了windows系统的system.ini的文件内容。</p>
<p>   但是这样也不代表这个payload的就适用于任何情况，比如我们更换一个读取的文件xmltest2.txt，内容是：</p>
<p>   <img  
                     lazyload
                     alt="image"
                     data-src="http://www.hetianlab.com/headImg.action?guideImg=/bb5ba17f-5f4c-44ed-8c3d-12ca72690c4b.png"
                      alt="img"
                ></p>
<p>   我们再使用刚才的payload测试：</p>
<p>   <img  
                     lazyload
                     alt="image"
                     data-src="http://www.hetianlab.com/headImg.action?guideImg=/48198e19-ef71-45f6-9026-dc63e706473b.png"
                      alt="img"
                ></p>
<p>   这个时候就会如上图一样，报很多错误，主要是因为我们要读取的文件内容中存在很多的特殊字符：大于号、小于号等，我们在前面的XML基础巩固中也提到过，当xml的标签内还存在小于号、大于号等特殊字符时，尤其是小于号，会被XML解析器误认为是另一个标签的开始，这样就会造成解析的错误。所以我们的问题是：</p>
<p>   <img  
                     lazyload
                     alt="image"
                     data-src="http://www.hetianlab.com/headImg.action?guideImg=/52bacae0-48d7-486d-a49c-09df72c68213.png"
                      alt="img"
                ></p>
<p>   所以我们就要想办法绕过。这个时候我们就需要了解一下XML CDATA了，我们先看一下w3school中对他的描述：</p>
<p>   <img  
                     lazyload
                     alt="image"
                     data-src="http://www.hetianlab.com/headImg.action?guideImg=/09be709a-34bd-4832-a7f9-3f94abd208e9.png"
                      alt="img"
                ></p>
<p>   其实只用看一个开始，我们就大概知道CDATA的作用了，它可以使得使用其中的数据内容不会被xml解析器解析。然后我们再看其使用方式：</p>
<p>   <img  
                     lazyload
                     alt="image"
                     data-src="http://www.hetianlab.com/headImg.action?guideImg=/7c01d25c-9bf6-42f2-b99f-31c4503bbe41.png"
                      alt="img"
                ></p>
<p>   从w3school给出的例子，我们也大概知道了CDATA的使用方式，但是其还需要注意几点：</p>
<p>   a. CDATA 部分不能包含字符串 “]]&gt;”。也不允许嵌套的 CDATA 部分，这样会导致异常的闭合，从而使解析器报错。</p>
<p>   b. 标记 CDATA 部分结尾的 “]]&gt;” 不能包含空格或换行。</p>
<p>   那么了解了这些，我们就可以尝试使用CDATA再次去读取目标文件的内容，我们首先需要把要读取的到的内容放在CDATA中，但是CDATA并没有提供拼接的方法，所以我们暂且使用普通实体进行拼接尝试（注意是尝试）：</p>
<p>   <img  
                     lazyload
                     alt="image"
                     data-src="http://www.hetianlab.com/headImg.action?guideImg=/55dfd86c-a46f-4b65-a34e-dc60e2e1067c.png"
                      alt="img"
                ></p>
<p>   我们尝试直接使用实体来进行拼接，但是测试失败：</p>
<p>   <img  
                     lazyload
                     alt="image"
                     data-src="http://www.hetianlab.com/headImg.action?guideImg=/eba2fc1b-faba-4170-a75b-3eeb6f314848.png"
                      alt="img"
                ></p>
<p>   这说明我们的拼接方式不可行，我们现在使用的是一般实体，我们在前面的xml基础知识中介绍过了，一般实体的引用是在xml文档内容中，既然在xml文档内容中拼接不可行，那再dtd中拼接可行吗？我们再次进行尝试，既然再dtd中拼接，那就需要用到参数实体了。</p>
<p>   我们再次尝试构造payload：</p>
<p>   <img  
                     lazyload
                     alt="image"
                     data-src="http://www.hetianlab.com/headImg.action?guideImg=/c954ed86-0f20-455b-952d-d3effc5315cb.png"
                      alt="img"
                ></p>
<p>   理论上，我们完美地将这几个参数实体拼接了起来，并将值赋给了一般实体all，但是遗憾的是，我们的payload还是报错了：</p>
<p>   <img  
                     lazyload
                     alt="image"
                     data-src="http://www.hetianlab.com/headImg.action?guideImg=/697e6d68-cfc4-409e-ad82-c3dc3aa1d976.png"
                      alt="img"
                ></p>
<p>   那么这又是为什么呢？根据XML规范所描述：“在DTD内部子集中的参数实体调用，不能混掺到标记语言中”，这是什么意思呢？就是不能在实际的标记语言中来调用参数实体，像我们这样，就是在标记语言中进行调用：</p>
<p>   <img  
                     lazyload
                     alt="image"
                     data-src="http://www.hetianlab.com/headImg.action?guideImg=/34c0d65e-ffa5-4fed-8683-3cd86c03e5dd.png"
                      alt="img"
                ></p>
<p>   但可以在同级别中被当作标记语言调用，就像是参数实体的引用，就是将调用当成了一个标记语言，像这样：</p>
<p>   <img  
                     lazyload
                     alt="image"
                     data-src="http://www.hetianlab.com/headImg.action?guideImg=/b774add3-adcb-40f6-aaca-3ff855c40b12.png"
                      alt="img"
                ></p>
<p>   也就是我们所构造的payload这种使用方式，不能在内部DTD中被这样使用，但是幸运的是，XML规范还声明了一点：“外部参数实体不受此限制”，这就告诉我们可以使用外部的DTD来构造payload，将我们的CDATA内容拼接起来：</p>
<p>   <img  
                     lazyload
                     alt="image"
                     data-src="http://www.hetianlab.com/headImg.action?guideImg=/6a2604c2-cbbe-4f48-95e5-166e1f55a265.png"
                      alt="img"
                ></p>
<p>   DTD文件的内容：</p>
<p>   <img  
                     lazyload
                     alt="image"
                     data-src="http://www.hetianlab.com/headImg.action?guideImg=/7395ec9a-0c90-4e4e-8438-21f6b2fdcf24.png"
                      alt="img"
                ></p>
<p>   我们再次进行攻击尝试，成功读取到文件内容：</p>
<p>   <img  
                     lazyload
                     alt="image"
                     data-src="http://www.hetianlab.com/headImg.action?guideImg=/26fb0f38-26b6-4c06-927a-408344b98a45.png"
                      alt="img"
                ></p>
<p>   Ps：</p>
<p>   由于环境资源的关系，我们在进行攻击时，所使用的外部dtd文件，是本地环境的。但是在实际的攻击情况下，这个DTD文件应该是我们自己所掌握的主机的DTD文件，文件的内容是受我们所控的。</p>
<hr>
<h2 id="命令执行"><a href="#命令执行" class="headerlink" title="命令执行"></a>命令执行</h2><h3 id="命令执行漏洞简介"><a href="#命令执行漏洞简介" class="headerlink" title="命令执行漏洞简介"></a>命令执行漏洞简介</h3><p>什么是命令执行 ：未对用户输入进行严格过滤 </p>
<p>其危害:</p>
<p>继承Web服务程序的权限去执行系统命令或读写文件</p>
<p>反弹shell，获得目标服务器的权限</p>
<p>进一步内网渗透</p>
<p>远程命令执行</p>
<p>常见的PHP:<code>eval() assert() preg_replace() creatr_function()</code>函数</p>
<p><code>eval() assert()</code>可以执行参数的代码，且接受的参数时字符串</p>
<p><code>eval</code>要求其传入的参数必须为PHP代码，就是要求以分号结尾</p>
<p><code>assert</code>是直接把传入的参数当作代码 可以直接执行 不强制要求分号</p>
<p><code>preg_replace()</code>其参数形式：<code>(&#39;正侧规则&#39;，&#39;替换字符&#39;,&#39;目标字符&#39;)</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">	preg_replace(&#x27;/test/e&#x27;,$_POST[&#x27;cmd&#x27;],&#x27;just test&#x27;);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p><code>array_map()</code>：其参数<code>(函数，命令)   ---(function,cmd)  (assert,phpinfo())</code></p>
<p>系统命令执行&#x2F;本地命令执行</p>
<p>常见函数有;;<code>system() exec() shell_exec() passthru() penti-exec() popen() proc-pen()</code></p>
<p><code>system()</code>：执行外部程序，并且显示输出</p>
<p><code>exec()</code>:执行外部程序</p>
<p><code>shell-exec()</code>：通过shell环境执行命令，并且将完整的输出以字符串的方式返回</p>
<p><code>passthru()</code>：执行linux系统命令并且显示原始输出</p>
<h3 id="系统常用命令执行的特殊字符"><a href="#系统常用命令执行的特殊字符" class="headerlink" title="系统常用命令执行的特殊字符"></a>系统常用命令执行的特殊字符</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cms1|cmd2  无论怎样cmd2都会执行</span><br><span class="line">cmd1;cmd2	无论怎样cmd2都会执行</span><br><span class="line">cmd1||cmd2	cmd1执行失败时才执行cmd2</span><br><span class="line">cmd1&amp;&amp;cmd2   仅在<span class="built_in">cmd</span>执行成功后才可以执行cmd2</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>&amp;<span class="built_in">net</span> user  IP和<span class="built_in">net</span> user都可以执行并全部输出</span><br><span class="line">&gt;(cnmd): &lt;(ls)</span><br><span class="line">&lt;(<span class="built_in">cmd</span>: &gt;(ls)</span><br></pre></td></tr></table></figure>

<p>命令执行时常见的绕过手段</p>
<h4 id="黑名单绕过"><a href="#黑名单绕过" class="headerlink" title="黑名单绕过"></a>黑名单绕过</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a=l;b=s;$a<span class="variable">$b</span></span><br></pre></td></tr></table></figure>

<h4 id="空格过滤"><a href="#空格过滤" class="headerlink" title="空格过滤"></a>空格过滤</h4><p>空格可以用以下字符串代替：</p>
<p><code>&lt; 、&lt;&gt;、%20(space)、%09(tab)、$IFS$9、 $&#123;IFS&#125;、$IFS等</code></p>
<h4 id="一些命令分隔符"><a href="#一些命令分隔符" class="headerlink" title="一些命令分隔符"></a>一些命令分隔符</h4><p>linux中：%0a 、%0d 、; 、&amp; 、| 、&amp;&amp;、||<br>windows中：%0a、&amp;、|、%1a（一个神奇的角色，作为.bat文件中的命令分隔符）</p>
<p>1、在 shell 中，担任”连续指令”功能的符号就是”;”<br>2、”&amp;” 放在启动参数后面表示设置此进程为后台进程，默认情况下，进程是前台进程，这时就把Shell给占据了，我们无法进行其他操作，对于那些没有交互的进程，很多时候，我们希望将其在后台启动，可以在启动参数的时候加一个’&amp;’实现这个目的。<br>3、管道符”|”左边命令的输出就会作为管道符右边命令的输入，所以左边的输出并不显示</p>
<p><strong>在Linux bash中还可以使用<code>&#123;OS_COMMAND,ARGUMENT&#125;</code>来执行系统命令</strong></p>
<h4 id="linux中直接查看文件内容的工具"><a href="#linux中直接查看文件内容的工具" class="headerlink" title="linux中直接查看文件内容的工具"></a>linux中直接查看文件内容的工具</h4><p>cat、tac、more、less、head、tail、nl、sed、sort、uniq、</p>
<p>参考博客： <a class="link"   target="_blank" rel="noopener" href="https://blog.csdn.net/silence1_/article/details/96135760" >https://blog.csdn.net/silence1_/article/details/96135760<i class="fas fa-external-link-alt"></i></a></p>
<h2 id="反序列化"><a href="#反序列化" class="headerlink" title="反序列化"></a>反序列化</h2><p>序列化指的是 类的对象在传输的时候会变成字符串</p>
<p>而反序列化就是指 字符串可以变成一个对象。</p>
<h3 id="01、序列化和反序列化概述"><a href="#01、序列化和反序列化概述" class="headerlink" title="01、序列化和反序列化概述"></a>01、序列化和反序列化概述</h3><p>​	序列化：把对象转化为字符串</p>
<p>​	反序列化：字符串转化为对象 </p>
<p>​	通过反序列化在特定条件下可以重建php对象并执行php对象中某些magic函数</p>
<p>​	反序列化的作用在于有一些非常好的魔法函数。</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://img-blog.csdnimg.cn/20200314152006506.PNG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RVT2FuMDIxNg==,size_16,color_FFFFFF,t_70"
                      alt="概述"
                ></p>
<p>​	在反序列化的时候，我们测试知道</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$s1</span>=<span class="number">111</span>;</span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$s2</span>=<span class="string">&#x27;protected&#x27;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$s3</span> =<span class="string">&#x27;private&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>​		他被序列化之后  </p>
<p>​	<img  
                     lazyload
                     alt="image"
                     data-src="https://img-blog.csdnimg.cn/20200314233424586.PNG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RVT2FuMDIxNg==,size_16,color_FFFFFF,t_70"
                      alt="over"
                ></p>
<p>魔法函数概述</p>
<p> Php对象中有一些特殊的函数，叫做magic函数，他们在特定条件下执行，比如创建、销毁对象的时候</p>
<p>  为了更好的理解magic方法是如何工作的，让我们添加一个magic方法在我们的类中。</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://img-blog.csdnimg.cn/20200314152043548.PNG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RVT2FuMDIxNg==,size_16,color_FFFFFF,t_70"
                      alt="魔法函数"
                ></p>
<p>protected:  \0<em>\0name   %00</em>%00name</p>
<p>privated: \0类名\0name    %00类名%00name</p>
<p>当遇到过滤<code>%00</code>的时候，可以把s变成S 同时把value的%00变为%5c00。</p>
<p>在我们属性序列化字符串的时候，对类中不同的属性有不同的表述方式，protected ,private ，public 在序列化的时候都不是一样的 【注意 空格的时候可以用<code>%00</code>来代替。</p>
<h4 id="小tips"><a href="#小tips" class="headerlink" title="小tips"></a>小tips</h4><p>还有一个需要提到的点，就是在序列化字符串中，s - non-escaped binary string和 S - escaped binary string是有区别的。对于s就不用说了，这里说一下S属性： S:<length>:”<value>“ 其中 <length> 是源字符串的长度，而非 <value> 的长度。<length> 是非负整数，数字前可以带有正号（+）。<value> 为经过转义之后的字符串。它的转义规则是，对于 ASCII 码小于 128 的字符（但不包括 \），按照单个字节写入（与 s 标识的相同），对于 128~255 的字符和 \ 字符，则将其 ASCII 码值转化为 16 进制编码的字符串，以 \ 作为开头，后面两个字节分别是这个字符的 16 进制编码，顺序按照由高位到低位排列，也就是第 8-5 位所对应的16进制数字字符（abcdef 这几个字母是小写）作为第一个字节，第 4-1 位作为第二个字节。依次编码下来，得到的就是 <value> 的内容了。</p>
<p>  也就是说，对于刚才的序列化字符串：</p>
<p>  O:4:”Test”:3:{s:2:”s1”;i:111;s:5:”%00*%00s2”;s:9:”protected”;s:8:”%00Test%00s3”;s:7:”private”;}</p>
<p>  可以用S去代替s，即：</p>
<p>  O:4:”Test”:3:{S:2:”s1”;i:111;S:5:”%00*%00s2”;S:9:”protected”;S:8:”%00Test%00s3”;S:7:”private”;}</p>
<p>  但是对于 \00 这种转义了的，只有S才会认，而s并不会正常识别，详细区别见test1.php：</p>
<p>  <img  
                     lazyload
                     alt="image"
                     data-src="http://www.hetianlab.com/headImg.action?guideImg=/2940a329-e20c-4e90-8c2b-10bf72bf4180.png"
                      alt="img"
                ></p>
<p>  访问：<a class="link"   target="_blank" rel="noopener" href="http://127.0.0.1/heetian/test1.php" >http://127.0.0.1/heetian/test1.php<i class="fas fa-external-link-alt"></i></a></p>
<p>  <img  
                     lazyload
                     alt="image"
                     data-src="http://www.hetianlab.com/headImg.action?guideImg=GB9d6c0ca797abec2017041708484900001/ef87a1fe-2248-4915-9722-bd9067f6c6d5.png"
                      alt="img"
                ></p>
<p>  可以看到，这个结果和我们预期的一样。</p>
<hr>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://img-blog.csdnimg.cn/20200314152306722.PNG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RVT2FuMDIxNg==,size_16,color_FFFFFF,t_70"
                      alt="常见的函数"
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://img-blog.csdnimg.cn/20200314152353120.PNG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RVT2FuMDIxNg==,size_16,color_FFFFFF,t_70"
                      alt="特别的string"
                ></p>
<p>我们在平常是如何使用反序列化呢？</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://img-blog.csdnimg.cn/20200314152119696.PNG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RVT2FuMDIxNg==,size_16,color_FFFFFF,t_70"
                      alt="产生方法"
                ></p>
<p>下面是一个简单的例子：</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://img-blog.csdnimg.cn/20200314152433588.PNG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RVT2FuMDIxNg==,size_16,color_FFFFFF,t_70"
                      alt="例子"
                ></p>
<hr>
<h3 id="反序列化进阶"><a href="#反序列化进阶" class="headerlink" title="反序列化进阶"></a>反序列化进阶</h3><p>CTF中的一些小Tips :</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://img-blog.csdnimg.cn/20200314172941548.PNG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RVT2FuMDIxNg==,size_16,color_FFFFFF,t_70"
                      alt="tips_1"
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://img-blog.csdnimg.cn/20200314173023291.PNG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RVT2FuMDIxNg==,size_16,color_FFFFFF,t_70"
                      alt="tips_2"
                ></p>
<p>像上述的都是直接利用反序列化函数做的</p>
<p>如果没有反序列化函数的话，我们可以利用到phar:&#x2F;&#x2F;流扩展反序列化的方式攻击</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://img-blog.csdnimg.cn/20200314173219296.PNG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RVT2FuMDIxNg==,size_16,color_FFFFFF,t_70"
                      alt="概述"
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://img-blog.csdnimg.cn/20200314173356706.PNG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RVT2FuMDIxNg==,size_16,color_FFFFFF,t_70"
                      alt="概述"
                ></p>
<p>下面是收到该函数就会产生反序列化效果的函数</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://img-blog.csdnimg.cn/20200314173252404.PNG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RVT2FuMDIxNg==,size_16,color_FFFFFF,t_70"
                      alt="函数表"
                ></p>
<p>这里就要提问了！！</p>
<p>怎么生成这个文件呢？？</p>
<p>下面是一个例子</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://img-blog.csdnimg.cn/20200314173445262.PNG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RVT2FuMDIxNg==,size_16,color_FFFFFF,t_70"
                      alt="生成方法"
                ></p>
<p>其中的phar文件有：</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://img-blog.csdnimg.cn/20200314173543720.PNG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RVT2FuMDIxNg==,size_16,color_FFFFFF,t_70"
                      alt="文件类别"
                ></p>
<p>下面是利用phar文件的方法 ：</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://img-blog.csdnimg.cn/20200314173628290.PNG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RVT2FuMDIxNg==,size_16,color_FFFFFF,t_70"
                      alt="利用方法"
                ></p>
<p>好了好了，感觉这篇笔记怎么全是图片</p>
<p>emm总结下phar文件打反序列化的过程</p>
<p>1、我们查看类，找到利用点</p>
<p>2、根据利用点 写phar文件 </p>
<p>3、把char文件上传 再利用phar:&#x2F;&#x2F;协议来打反序列化</p>
<p>下面给个例子</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://img-blog.csdnimg.cn/2020031417371079.PNG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RVT2FuMDIxNg==,size_16,color_FFFFFF,t_70"
                      alt="题目"
                ></p>
<p>下面是patload：</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://img-blog.csdnimg.cn/2020031417372070.PNG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RVT2FuMDIxNg==,size_16,color_FFFFFF,t_70"
                      alt="解题"
                ></p>
<h2 id="CSRF"><a href="#CSRF" class="headerlink" title="CSRF"></a>CSRF</h2><h3 id="csrf概述"><a href="#csrf概述" class="headerlink" title="csrf概述"></a>csrf概述</h3><p>跨站请求伪造</p>
<p>1、跨站点的请求</p>
<p>2、请求时伪造的</p>
<p>它是一种挟制用户在当前已登陆的web应用程序上执行非本意的操作的攻击方法</p>
<p>CSRF漏洞的成因就是网站的cookie在浏览器中不会过期，只要不关闭浏览器或者退出登录，那么以后只要是访问这个网站，都是默认你已经登陆的状态</p>
<p>次完整的CSRF攻击，需要受害用户需要完成两个步骤：</p>
<p>​    1.登录正常网站，并在本地生成Cookie。</p>
<p>​    2.在不退出正常网站的情况下，访问恶意网站。</p>
<p>   <img  
                     lazyload
                     alt="image"
                     data-src="http://www.hetianlab.com/headImg.action?guideImg=/05096033-30ec-4142-9d6a-aa67c95e896e.png"
                      alt="img"
                ></p>
<p>csrf的本质就是在不知情的情况下执行请求</p>
<p>分为get类型csrf  post型csrf</p>
<p>重点在于利用html构造请求</p>
<h3 id="csrf漏洞利用"><a href="#csrf漏洞利用" class="headerlink" title="csrf漏洞利用"></a>csrf漏洞利用</h3><p>csrf分为两类 </p>
<p>1、操作类型csrf：模拟人为操作，让受害者执行危险请求</p>
<p>2读取类型csrf：模拟人为请求，获取受害者敏感信息</p>
<p>它可以分为 cars，jsonp。【我看视频看不下去了。他讲的我听不懂。</p>
<p>合天的总结：</p>
<p>看这个好多天了。</p>
<p>但是我真的觉得好恶心。。。 特别是CSRF SSRF这两个 我看的贼懵逼</p>
<p>合天剩下的有逻辑漏洞 ，文件上传，文件包含，sql注入。</p>
<p>后面三个以前就学过，所以我不是很打算再去看。不过我的计划是</p>
<p>一周看一个 ，其余时间全刷题目！！</p>
<p>总结以下；这次合天的培训 我学到了挺多的。就我而言。。</p>
<p>那么我想的是今天18号。在30号之前，我要刷完攻防世界的web，同时刷两套真题！</p>

            </div>

            
                <div class="post-copyright-info">
                    
<div class="article-copyright-info-container">
    <ul class="copyright-info-content">
        <li class="post-title">
            <span class="type">本文标题</span>：<span class="content">合天培训（xss xxe uns FilInc ）</span>
        </li>
        <li class="post-author">
            <span class="type">本文作者</span>：<span class="content">liduoan.efls</span>
        </li>
        <li class="post-time">
            <span class="type">创建时间</span>：<span class="content">2020-02-26 01:16:52</span>
        </li>
        <li class="post-link">
            <span class="type">本文链接</span>：<span class="content">2020/02/26/CTFcomig/合天培训/</span>
        </li>
        <li class="post-license">
            <span class="type">版权声明</span>：<span class="content">本博客所有文章除特别声明外，均采用 <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> 许可协议。转载请注明出处！</span>
        </li>
    </ul>
    <div class="copy-copyright-info flex-center tooltip" data-content="复制版权信息" data-offset-y="-2px">
        <i class="fa-solid fa-copy"></i>
    </div>
</div>

                </div>
            

            

            
                <div class="article-nav">
                    
                        <div class="article-prev">
                            <a class="prev"
                               rel="prev"
                               href="/2020/03/02/CTFcomig/CTFHUB/"
                            >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                                <span class="title flex-center">
                                <span class="post-nav-title-item">CTFHUB</span>
                                <span class="post-nav-item">上一篇</span>
                            </span>
                            </a>
                        </div>
                    
                    
                </div>
            

            
        </div>

        
            <div class="toc-content-container">
                <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP-x2F-HTTPS%E5%8D%8F%E8%AE%AE%E4%BB%8B%E7%BB%8D"><span class="nav-number">1.</span> <span class="nav-text">HTTP&#x2F;HTTPS协议介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AE%89%E5%85%A8"><span class="nav-number">1.0.1.</span> <span class="nav-text">浏览器安全</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#XSS"><span class="nav-number">2.</span> <span class="nav-text">XSS</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80"><span class="nav-number">2.1.</span> <span class="nav-text">前端基础</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#FileInclude"><span class="nav-number">3.</span> <span class="nav-text">FileInclude</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E%E5%88%86%E7%B1%BB"><span class="nav-number">3.0.0.1.</span> <span class="nav-text">文件包含漏洞分类</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BC%AA%E5%8D%8F%E8%AE%AE"><span class="nav-number">3.0.0.2.</span> <span class="nav-text">伪协议</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E7%BB%95%E8%BF%87"><span class="nav-number">3.0.0.3.</span> <span class="nav-text">文件包含绕过</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#XXE"><span class="nav-number">4.</span> <span class="nav-text">XXE</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#XML%E4%BB%8B%E7%BB%8D%EF%BC%9A"><span class="nav-number">4.1.</span> <span class="nav-text">XML介绍：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#XML%E7%9A%84%E7%94%A8%E5%A4%84"><span class="nav-number">4.2.</span> <span class="nav-text">XML的用处</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#XML%E8%AF%AD%E6%B3%95"><span class="nav-number">4.3.</span> <span class="nav-text">XML语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DTD-%E6%96%87%E6%A1%A3%E7%B1%BB%E5%9E%8B%E5%AE%9A%E4%B9%89"><span class="nav-number">4.4.</span> <span class="nav-text">DTD 文档类型定义</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#DTD%E5%A3%B0%E6%98%8E"><span class="nav-number">4.4.1.</span> <span class="nav-text">DTD声明</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#PCDATA"><span class="nav-number">4.4.2.</span> <span class="nav-text">PCDATA</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#CDATA"><span class="nav-number">4.4.3.</span> <span class="nav-text">CDATA</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DTD%E5%AE%9E%E4%BD%93"><span class="nav-number">4.5.</span> <span class="nav-text">DTD实体</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%86%85%E9%83%A8%E6%99%AE%E9%80%9A%E5%AE%9E%E4%BD%93%EF%BC%9A"><span class="nav-number">4.5.1.</span> <span class="nav-text">内部普通实体：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%96%E9%83%A8%E6%99%AE%E9%80%9A%E5%AE%9E%E4%BD%93"><span class="nav-number">4.5.2.</span> <span class="nav-text">外部普通实体</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%82%E6%95%B0%E5%AE%9E%E4%BD%93"><span class="nav-number">4.5.3.</span> <span class="nav-text">参数实体</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#XML%E6%B3%A8%E5%85%A5"><span class="nav-number">4.6.</span> <span class="nav-text">XML注入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#XXE-%E5%8D%B3SML%E5%A4%96%E9%83%A8%E5%AE%9E%E4%BD%93%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB"><span class="nav-number">4.7.</span> <span class="nav-text">XXE 即SML外部实体注入攻击</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%A7%E7%94%9F%E5%8E%9F%E5%9B%A0%EF%BC%9A"><span class="nav-number">4.7.1.</span> <span class="nav-text">产生原因：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#XXE%E7%9A%84%E5%88%A9%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="nav-number">4.7.2.</span> <span class="nav-text">XXE的利用场景</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%89%E5%9B%9E%E6%98%BE%E7%9A%84%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96"><span class="nav-number">4.8.</span> <span class="nav-text">有回显的本地文件读取</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C"><span class="nav-number">5.</span> <span class="nav-text">命令执行</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E%E7%AE%80%E4%BB%8B"><span class="nav-number">5.1.</span> <span class="nav-text">命令执行漏洞简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E7%9A%84%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6"><span class="nav-number">5.2.</span> <span class="nav-text">系统常用命令执行的特殊字符</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%BB%91%E5%90%8D%E5%8D%95%E7%BB%95%E8%BF%87"><span class="nav-number">5.2.1.</span> <span class="nav-text">黑名单绕过</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A9%BA%E6%A0%BC%E8%BF%87%E6%BB%A4"><span class="nav-number">5.2.2.</span> <span class="nav-text">空格过滤</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%80%E4%BA%9B%E5%91%BD%E4%BB%A4%E5%88%86%E9%9A%94%E7%AC%A6"><span class="nav-number">5.2.3.</span> <span class="nav-text">一些命令分隔符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#linux%E4%B8%AD%E7%9B%B4%E6%8E%A5%E6%9F%A5%E7%9C%8B%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E7%9A%84%E5%B7%A5%E5%85%B7"><span class="nav-number">5.2.4.</span> <span class="nav-text">linux中直接查看文件内容的工具</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96"><span class="nav-number">6.</span> <span class="nav-text">反序列化</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#01%E3%80%81%E5%BA%8F%E5%88%97%E5%8C%96%E5%92%8C%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%A6%82%E8%BF%B0"><span class="nav-number">6.1.</span> <span class="nav-text">01、序列化和反序列化概述</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B0%8Ftips"><span class="nav-number">6.1.1.</span> <span class="nav-text">小tips</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E8%BF%9B%E9%98%B6"><span class="nav-number">6.2.</span> <span class="nav-text">反序列化进阶</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CSRF"><span class="nav-number">7.</span> <span class="nav-text">CSRF</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#csrf%E6%A6%82%E8%BF%B0"><span class="nav-number">7.1.</span> <span class="nav-text">csrf概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#csrf%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8"><span class="nav-number">7.2.</span> <span class="nav-text">csrf漏洞利用</span></a></li></ol></li></ol>
    </div>
</div>

            </div>
        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            
<footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
                <span>2020</span> -
            
            2023
            
                &nbsp;<i class="fas fa-heart icon-animate"></i>
                &nbsp;<a href="/">liduoan.efls</a>
            
        </div>
        
            <script async data-pjax
                    src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    访问人数&nbsp;<span id="busuanzi_value_site_uv"></span>&ensp;
                
                
                    总访问量&nbsp;<span id="busuanzi_value_site_pv"></span>
                
            </div>
        
        <div class="theme-info info-item">
            由 <a target="_blank" href="https://hexo.io">Hexo</a> 驱动&nbsp;|&nbsp;主题&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.6.1</a>
        </div>
        
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item flex-center toggle-show-toc">
                <i class="fas fa-list"></i>
            </li>
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="fas fa-arrow-up"></i>
            </li>
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
    </ul>
</div>

    </div>

    <div class="zoom-in-image-mask">
    <img class="zoom-in-image">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="搜索..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="close-popup-btn">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>



<script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/dark-light-toggle.js"></script>




    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/local-search.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/code-block.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/lazyload.js"></script>


<div class="post-scripts pjax">
    
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/post-helper.js"></script>
        
            <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/libs/anime.min.js"></script>
        
        
            <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/toc.js"></script>
        
    
</div>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/libs/pjax.min.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            KEEP.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            KEEP.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            KEEP.refresh();
        });
    });
</script>



</body>
</html>
